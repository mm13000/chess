# Client UI

Essentially three different "UIs" - prelogin, postlogin, and gameplay

Each one basically just has a REPL loop.

# Server Facade
Should be in client package.

This is the **first** thing I should write and test. 
I don't need to know anything else past today (3/11) to write this.

When the client wants to call the server it creates a ServerFacade. The ServerFacade is responsible for calling the server and returning the result to the client. 
The ServerFacade is the only class that can call the server or knows about HTTP or anything of that sort.
```java
class ServerFacade {
    RegisterResult register(RegisterRequest request);
    LoginResult login(LoginRequest request);
}
```

Client will need domain name of the server and the port number to connect to the server. 
```java
ServerFacade serverFacade = new ServerFacade("http://localhost", 8080);
```

```java
public void doGet(String urlString) throws IOException {
    URL url = new URL(urlString);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    
    connection.setReadTimeout(10000);
    connection.setRequestMethod("GET");
    
    // Set HTTP request headers, if necessary
    // connection.addRequestProperty("Accept", "text/html");
    // connection.addRequestProperty("Authorization", authToken.string());
    
    connection.connect();
    if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
        // Get HTTP response headers, if necessary
        // Map<String, List<String>> headers = connection.getHeaderFields();
        
        // OR
        
        // connection.getHeaderField("Content-Length");
        
        InputStream responseBody = connection.getInputStream();
        // Process the responseBody
    } else {
        // Error handling code goes here
        
        InputStream responseBody = connection.getErrorStream();
        // Read and process error response body
    }
}
```

Notice that this uses Request and Result objects. 
I think I need to move these into the 'shared' module.

^^ That's how you do a "get" request. 

A post request is the same, except you need to write to the output stream.

```java
import java.io.OutputStream;

public void doPost(String urlString, String requestBody) throws IOException {
    URL url = new URL(urlString);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();

    connection.setReadTimeout(10000);
    connection.setRequestMethod("POST");

    // Set HTTP request headers, if necessary
    // connection.addRequestProperty("Accept", "text/html");
    // connection.addRequestProperty("Authorization", authToken.string());

    connection.setDoOutput(true); // necessary?
    connection.connect();

    OutputStream requestBodyStream = connection.getOutputStream();
    requestBodyStream.write(requestBody.getBytes());
    requestBodyStream.close();

    try (OutputStream requestBodyStream = connection.getOutputStream()) {
        // Write the requestBody to the requestBodyStream
    }

    if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
        // Get HTTP response headers, if necessary
        // Map<String, List<String>> headers = connection.getHeaderFields();

        // OR

        // connection.getHeaderField("Content-Length");

        InputStream responseBody = connection.getInputStream();
        // Process the responseBody
    } else {
        // Error handling code goes here

        InputStream responseBody = connection.getErrorStream();
        // Read and process error response body
    }
}
```

Check out petshop's 'makeRequest' method. It's a good example of how to use the ServerFacade.


# Console UI

## Terminal control control codes (or escape sequences)

#### Below list is generated by Github Copilot (not sure if correct):

- `\033[2J` - clear the terminal
- `\033[H` - move the cursor to the top-left corner
- `\033[2K` - clear the current line
- `\033[1A` - move the cursor up one line
- `\033[1B` - move the cursor down one line
- `\033[1C` - move the cursor right one character
- Specify the background color and text color with `\033[<background>;<text>m`
    - 0 - black
    - 1 - red
    - 2 - green
    - 3 - yellow
    - 4 - blue
    - 5 - magenta
    - 6 - cyan
    - 7 - white
- Set text attributes such as bold, faint, italic, underline, and blink with `\033[<attribute>m`
    - 0 - reset all attributes
    - 1 - bold
    - 2 - faint
    - 3 - italic
    - 4 - underline
    - 5 - blink
    - 7 - inverse
    - 8 - hidden

#### Given in class:

```java
public class EscapeSequences {
    private static final String UNICODE_ESCAPE = "\u001B";
    private static final string ANSI_ESCAPE = "\033";
}
```

## Drawing the chess board

We are given sample code for drawing a Tic Tac Toe board

Can choose to use unicode characters to represent chess pieces:
- White king - `\u2654`
- White queen - `\u2655`
- White rook - `\u2656`
- White bishop - `\u2657`
- White knight - `\u2658`
- White pawn - `\u2659`
- Black king - `\u265A`
- Black queen - `\u265B`
- Black rook - `\u265C`
- Black bishop - `\u265D`
- Black knight - `\u265E`
- Black pawn - `\u265F`

These are also given in the sample code. 
Challenge is that the chess piece symbols wider than regular characters.
The sample code fixes this by using a adifferent "empty" character that are "em spaces"

IF using chess piece characters:
- Set terminal font in IntelliJ to 'Monospace'
- File -> Settings -> Editor -> Color Scheme -> Console Font -> Monospaced
- The "Em Space" unicode character is the same width as chess piece characters
- Use a combination fo regular spaces adn em spaces to make things align properly